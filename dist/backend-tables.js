!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("backendTables",[],e):"object"==typeof exports?exports.backendTables=e():t.backendTables=e()}(self,(function(){return(()=>{"use strict";var t,e,a={},s={};function i(t){var e=s[t];if(void 0!==e)return e.exports;var n=s[t]={exports:{}};return a[t].call(n.exports,n,n.exports,i),n.exports}i.m=a,i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var a in e)i.o(e,a)&&!i.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},i.f={},i.e=t=>Promise.all(Object.keys(i.f).reduce(((e,a)=>(i.f[a](t,e),e)),[])),i.u=t=>t+".backend-tables.js",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),t={},e="backendTables:",i.l=(a,s,n,r)=>{if(t[a])t[a].push(s);else{var l,h;if(void 0!==n)for(var o=document.getElementsByTagName("script"),d=0;d<o.length;d++){var c=o[d];if(c.getAttribute("src")==a||c.getAttribute("data-webpack")==e+n){l=c;break}}l||(h=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.setAttribute("data-webpack",e+n),l.src=a),t[a]=[s];var p=(e,s)=>{l.onerror=l.onload=null,clearTimeout(u);var i=t[a];if(delete t[a],l.parentNode&&l.parentNode.removeChild(l),i&&i.forEach((t=>t(s))),e)return e(s)},u=setTimeout(p.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=p.bind(null,l.onerror),l.onload=p.bind(null,l.onload),h&&document.head.appendChild(l)}},i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;i.g.importScripts&&(t=i.g.location+"");var e=i.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var a=e.getElementsByTagName("script");a.length&&(t=a[a.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t})(),(()=>{var t={826:0};i.f.j=(e,a)=>{var s=i.o(t,e)?t[e]:void 0;if(0!==s)if(s)a.push(s[2]);else{var n=new Promise(((a,i)=>s=t[e]=[a,i]));a.push(s[2]=n);var r=i.p+i.u(e),l=new Error;i.l(r,(a=>{if(i.o(t,e)&&(0!==(s=t[e])&&(t[e]=void 0),s)){var n=a&&("load"===a.type?"missing":a.type),r=a&&a.target&&a.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+r+")",l.name="ChunkLoadError",l.type=n,l.request=r,s[1](l)}}),"chunk-"+e,e)}};var e=(e,a)=>{var s,n,[r,l,h]=a,o=0;for(s in l)i.o(l,s)&&(i.m[s]=l[s]);for(h&&h(i),e&&e(a);o<r.length;o++)n=r[o],i.o(t,n)&&t[n]&&t[n][0](),t[r[o]]=0},a=self.webpackChunkbackendTables=self.webpackChunkbackendTables||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))})();var n={};i.r(n),i.d(n,{initPlugin:()=>f});const r=t=>"[object Object]"===Object.prototype.toString.call(t),l=(t,e)=>{const a=document.createElement(t);if(e&&"object"==typeof e)for(const t in e)"html"===t?a.innerHTML=e[t]:a.setAttribute(t,e[t]);return a},h=t=>{t instanceof NodeList?t.forEach((t=>h(t))):t.innerHTML=""},o=(t,e,a)=>l("li",{class:t,html:`<a href="#" data-page="${e}">${a}</a>`}),d=(t,e)=>{let a,s;1===e?(a=0,s=t.length):-1===e&&(a=t.length-1,s=-1);for(let i=!0;i;){i=!1;for(let n=a;n!=s;n+=e)if(t[n+e]&&t[n].value>t[n+e].value){const a=t[n],s=t[n+e],r=a;t[n]=s,t[n+e]=r,i=!0}}return t};class c{constructor(t,e){return this.dt=t,this.rows=e,this}build(t){const e=l("tr");let a=this.dt.headings;return a.length||(a=t.map((()=>""))),a.forEach(((a,s)=>{const i=l("td");t[s]&&t[s].length||(t[s]=""),i.innerHTML=t[s],i.data=t[s],e.appendChild(i)})),e}render(t){return t}add(t){if(Array.isArray(t)){const e=this.dt;Array.isArray(t[0])?t.forEach((t=>{e.data.push(this.build(t))})):e.data.push(this.build(t)),e.data.length&&(e.hasRows=!0),this.update(),e.columns().rebuild()}}remove(t){const e=this.dt;Array.isArray(t)?(t.sort(((t,e)=>e-t)),t.forEach((t=>{e.data.splice(t,1)}))):"all"==t?e.data=[]:e.data.splice(t,1),e.data.length||(e.hasRows=!1),this.update(),e.columns().rebuild()}update(){this.dt.data.forEach(((t,e)=>{t.dataIndex=e}))}}class p{constructor(t){return this.dt=t,this}swap(t){if(t.length&&2===t.length){const e=[];this.dt.headings.forEach(((t,a)=>{e.push(a)}));const a=t[0],s=t[1],i=e[s];e[s]=e[a],e[a]=i,this.order(e)}}order(t){let e,a,s,i,n,r,l;const h=[[],[],[],[]],o=this.dt;t.forEach(((t,s)=>{n=o.headings[t],r="false"!==n.getAttribute("data-sortable"),e=n.cloneNode(!0),e.originalCellIndex=s,e.sortable=r,h[0].push(e),o.hiddenColumns.includes(t)||(a=n.cloneNode(!0),a.originalCellIndex=s,a.sortable=r,h[1].push(a))})),o.data.forEach(((e,a)=>{s=e.cloneNode(!1),i=e.cloneNode(!1),s.dataIndex=i.dataIndex=a,null!==e.searchIndex&&void 0!==e.searchIndex&&(s.searchIndex=i.searchIndex=e.searchIndex),t.forEach((t=>{l=e.cells[t].cloneNode(!0),l.data=e.cells[t].data,s.appendChild(l),o.hiddenColumns.includes(t)||(l=e.cells[t].cloneNode(!0),l.data=e.cells[t].data,i.appendChild(l))})),h[2].push(s),h[3].push(i)})),o.headings=h[0],o.activeHeadings=h[1],o.data=h[2],o.activeRows=h[3],o.update()}hide(t){if(t.length){const e=this.dt;t.forEach((t=>{e.hiddenColumns.includes(t)||e.hiddenColumns.push(t)})),this.rebuild()}}show(t){if(t.length){let e;const a=this.dt;t.forEach((t=>{e=a.hiddenColumns.indexOf(t),e>-1&&a.hiddenColumns.splice(e,1)})),this.rebuild()}}visible(t){let e;const a=this.dt;return t=t||a.headings.map((t=>t.originalCellIndex)),isNaN(t)?Array.isArray(t)&&(e=[],t.forEach((t=>{e.push(!a.hiddenColumns.includes(t))}))):e=!a.hiddenColumns.includes(t),e}add(t){let e;const a=document.createElement("th");if(!this.dt.headings.length)return this.dt.insert({headings:[t.heading],data:t.data.map((t=>[t]))}),void this.rebuild();this.dt.hiddenHeader?a.innerHTML="":t.heading.nodeName?a.appendChild(t.heading):a.innerHTML=t.heading,this.dt.headings.push(a),this.dt.data.forEach(((a,s)=>{t.data[s]&&(e=document.createElement("td"),t.data[s].nodeName?e.appendChild(t.data[s]):e.innerHTML=t.data[s],e.data=e.innerHTML,t.render&&(e.innerHTML=t.render.call(this,e.data,e,a)),a.appendChild(e))})),t.type&&a.setAttribute("data-type",t.type),t.format&&a.setAttribute("data-format",t.format),t.hasOwnProperty("sortable")&&(a.sortable=t.sortable,a.setAttribute("data-sortable",!0===t.sortable?"true":"false")),this.rebuild(),this.dt.renderHeader()}remove(t){Array.isArray(t)?(t.sort(((t,e)=>e-t)),t.forEach((t=>this.remove(t)))):(this.dt.headings.splice(t,1),this.dt.data.forEach((e=>{e.removeChild(e.cells[t])}))),this.rebuild()}filter(t,e,a,s){const i=this.dt;if(i.filterState||(i.filterState={originalData:i.data}),!i.filterState[t]){const e=[...s,()=>!0];i.filterState[t]=function(){let t=0;return()=>e[t++%e.length]}()}const n=i.filterState[t](),r=Array.from(i.filterState.originalData).filter((e=>{const a=e.cells[t],s=a.hasAttribute("data-content")?a.getAttribute("data-content"):a.innerText;return"function"==typeof n?n(s):s===n}));i.data=r,this.rebuild(),i.update(),a||i.emit("datatable.sort",t,e)}sort(t,e,a){const s=this.dt;if(s.hasHeadings&&(t<0||t>s.headings.length))return!1;const n=s.options.filters&&s.options.filters[s.headings[t].textContent];if(n&&0!==n.length)return void this.filter(t,e,a,n);s.sorting=!0,a||s.emit("datatable.sorting",t,e);let r=s.data;const l=[],h=[];let o=0,c=0;const p=s.headings[t],u=[];if("date"===p.getAttribute("data-type")){let t=!1;p.hasAttribute("data-format")&&(t=p.getAttribute("data-format")),u.push(i.e(568).then(i.bind(i,568)).then((({parseDate:e})=>a=>e(a,t))))}Promise.all(u).then((i=>{const n=i[0];let u,b;Array.from(r).forEach((e=>{const a=e.cells[t],s=a.hasAttribute("data-content")?a.getAttribute("data-content"):a.innerText;let i;i=n?n(s):"string"==typeof s?s.replace(/(\$|,|\s|%)/g,""):s,parseFloat(i)==i?h[c++]={value:Number(i),row:e}:l[o++]={value:"string"==typeof s?s.toLowerCase():s,row:e}})),e||(e=p.classList.contains("asc")?"desc":"asc"),"desc"==e?(u=d(l,-1),b=d(h,-1),p.classList.remove("asc"),p.classList.add("desc")):(u=d(h,1),b=d(l,1),p.classList.remove("desc"),p.classList.add("asc")),s.lastTh&&p!=s.lastTh&&(s.lastTh.classList.remove("desc"),s.lastTh.classList.remove("asc")),s.lastTh=p,r=u.concat(b),s.data=[];const g=[];r.forEach(((t,e)=>{s.data.push(t.row),null!==t.row.searchIndex&&void 0!==t.row.searchIndex&&g.push(e)})),s.searchData=g,this.rebuild(),s.update(),a||s.emit("datatable.sort",t,e)}))}rebuild(){let t,e,a,s;const i=this.dt,n=[];i.activeRows=[],i.activeHeadings=[],i.headings.forEach(((t,e)=>{t.originalCellIndex=e,t.sortable="false"!==t.getAttribute("data-sortable"),i.hiddenColumns.includes(e)||i.activeHeadings.push(t)})),i.data.forEach(((r,l)=>{t=r.cloneNode(!1),e=r.cloneNode(!1),t.dataIndex=e.dataIndex=l,null!==r.searchIndex&&void 0!==r.searchIndex&&(t.searchIndex=e.searchIndex=r.searchIndex),Array.from(r.cells).forEach((n=>{a=n.cloneNode(!0),a.data=n.data,t.appendChild(a),i.hiddenColumns.includes(a.cellIndex)||(s=a.cloneNode(!0),s.data=a.data,e.appendChild(s))})),n.push(t),i.activeRows.push(e)})),i.data=n,i.update()}}const u=function(t){let e=!1,a=!1;if((t=t||this.options.data).headings){e=l("thead");const a=l("tr");t.headings.forEach((t=>{const e=l("th",{html:t});a.appendChild(e)})),e.appendChild(a)}t.data&&t.data.length&&(a=l("tbody"),t.data.forEach((e=>{if(t.headings&&t.headings.length!==e.length)throw new Error("The number of rows do not match the number of headings.");const s=l("tr");e.forEach((t=>{const e=l("td",{html:t});s.appendChild(e)})),a.appendChild(s)}))),e&&(null!==this.table.tHead&&this.table.removeChild(this.table.tHead),this.table.appendChild(e)),a&&(this.table.tBodies.length&&this.table.removeChild(this.table.tBodies[0]),this.table.appendChild(a))},b={sortable:!0,searchable:!0,paging:!0,perPage:10,perPageSelect:[5,10,15,20,25],nextPrev:!0,firstLast:!1,prevText:"&lsaquo;",nextText:"&rsaquo;",firstText:"&laquo;",lastText:"&raquo;",ellipsisText:"&hellip;",ascText:"▴",descText:"▾",truncatePager:!0,pagerDelta:2,scrollY:"",fixedColumns:!0,fixedHeight:!1,header:!0,footer:!1,labels:{placeholder:"Search...",perPage:"{select} entries per page",noRows:"No entries found",info:"Showing {start} to {end} of {rows} entries"},layout:{top:"{select}{search}",bottom:"{info}{pager}"}};class g{constructor(t,e={}){if(this.initialized=!1,this.options={...b,...e,layout:{...b.layout,...e.layout},labels:{...b.labels,...e.labels}},"string"==typeof t&&(t=document.querySelector(t)),this.initialLayout=t.innerHTML,this.initialSortable=this.options.sortable,this.options.header||(this.options.sortable=!1),null===t.tHead&&(!this.options.data||this.options.data&&!this.options.data.headings)&&(this.options.sortable=!1),t.tBodies.length&&!t.tBodies[0].rows.length&&this.options.data&&!this.options.data.data)throw new Error("You seem to be using the data option, but you've not defined any rows.");this.table=t,this.init()}static extend(t,e){"function"==typeof e?g.prototype[t]=e:g[t]=e}init(t){if(this.initialized||this.table.classList.contains("dataTable-table"))return!1;Object.assign(this.options,t||{}),this.currentPage=1,this.onFirstPage=!0,this.hiddenColumns=[],this.columnRenderers=[],this.selectedColumns=[],this.render(),setTimeout((()=>{this.emit("datatable.init"),this.initialized=!0,this.options.plugins&&Object.entries(this.options.plugins).forEach((([t,e])=>{this[t]&&"function"==typeof this[t]&&(this[t]=this[t](e,{createElement:l}),e.enabled&&this[t].init&&"function"==typeof this[t].init&&this[t].init())}))}),10)}render(t){if(t){switch(t){case"page":this.renderPage();break;case"pager":this.renderPager();break;case"header":this.renderHeader()}return!1}const e=this.options;let a="";if(e.data&&u.call(this),e.ajax){const t=e.ajax,a=new XMLHttpRequest,s=t=>{this.emit("datatable.ajax.progress",t,a)},i=e=>{if(4===a.readyState)if(this.emit("datatable.ajax.loaded",e,a),200===a.status){const s={};s.data=t.load?t.load.call(this,a):a.responseText,s.type="json",t.content&&t.content.type&&(s.type=t.content.type,Object.assign(s,t.content)),this.import(s),this.setColumns(!0),this.emit("datatable.ajax.success",e,a)}else this.emit("datatable.ajax.error",e,a)},n=t=>{this.emit("datatable.ajax.error",t,a)},r=t=>{this.emit("datatable.ajax.abort",t,a)};a.addEventListener("progress",s,!1),a.addEventListener("load",i,!1),a.addEventListener("error",n,!1),a.addEventListener("abort",r,!1),this.emit("datatable.ajax.loading",a),a.open("GET","string"==typeof t?e.ajax:e.ajax.url),a.send()}if(this.body=this.table.tBodies[0],this.head=this.table.tHead,this.foot=this.table.tFoot,this.body||(this.body=l("tbody"),this.table.appendChild(this.body)),this.hasRows=this.body.rows.length>0,!this.head){const t=l("thead"),a=l("tr");this.hasRows&&(Array.from(this.body.rows[0].cells).forEach((()=>{a.appendChild(l("th"))})),t.appendChild(a)),this.head=t,this.table.insertBefore(this.head,this.body),this.hiddenHeader=!e.ajax}if(this.headings=[],this.hasHeadings=this.head.rows.length>0,this.hasHeadings&&(this.header=this.head.rows[0],this.headings=[].slice.call(this.header.cells)),e.header||this.head&&this.table.removeChild(this.table.tHead),e.footer?this.head&&!this.foot&&(this.foot=l("tfoot",{html:this.head.innerHTML}),this.table.appendChild(this.foot)):this.foot&&this.table.removeChild(this.table.tFoot),this.wrapper=l("div",{class:"dataTable-wrapper dataTable-loading"}),a+="<div class='dataTable-top'>",a+=e.layout.top,a+="</div>",e.scrollY.length?a+=`<div class='dataTable-container' style='height: ${e.scrollY}; overflow-Y: auto;'></div>`:a+="<div class='dataTable-container'></div>",a+="<div class='dataTable-bottom'>",a+=e.layout.bottom,a+="</div>",a=a.replace("{info}",e.paging?"<div class='dataTable-info'></div>":""),e.paging&&e.perPageSelect){let t="<div class='dataTable-dropdown'><label>";t+=e.labels.perPage,t+="</label></div>";const s=l("select",{class:"dataTable-selector"});e.perPageSelect.forEach((t=>{const a=t===e.perPage,i=new Option(t,t,a,a);s.add(i)})),t=t.replace("{select}",s.outerHTML),a=a.replace("{select}",t)}else a=a.replace("{select}","");if(e.searchable){const t=`<div class='dataTable-search'><input class='dataTable-input' placeholder='${e.labels.placeholder}' type='text'></div>`;a=a.replace("{search}",t)}else a=a.replace("{search}","");this.hasHeadings&&this.render("header"),this.table.classList.add("dataTable-table");const s=l("div",{class:"dataTable-pagination"}),i=l("ul");s.appendChild(i),a=a.replace(/\{pager\}/g,s.outerHTML),this.wrapper.innerHTML=a,this.container=this.wrapper.querySelector(".dataTable-container"),this.pagers=this.wrapper.querySelectorAll(".dataTable-pagination"),this.label=this.wrapper.querySelector(".dataTable-info"),this.table.parentNode.replaceChild(this.wrapper,this.table),this.container.appendChild(this.table),this.rect=this.table.getBoundingClientRect(),this.data=Array.from(this.body.rows),this.activeRows=this.data.slice(),this.activeHeadings=this.headings.slice(),this.update(),e.ajax||this.setColumns(),this.fixHeight(),this.fixColumns(),e.header||this.wrapper.classList.add("no-header"),e.footer||this.wrapper.classList.add("no-footer"),e.sortable&&this.wrapper.classList.add("sortable"),e.searchable&&this.wrapper.classList.add("searchable"),e.fixedHeight&&this.wrapper.classList.add("fixed-height"),e.fixedColumns&&this.wrapper.classList.add("fixed-columns"),this.bindEvents()}renderPage(){if(this.hasHeadings&&(h(this.header),this.activeHeadings.forEach((t=>this.header.appendChild(t)))),this.hasRows&&this.totalPages){this.currentPage>this.totalPages&&(this.currentPage=1);const t=this.currentPage-1,e=document.createDocumentFragment();this.pages[t].forEach((t=>e.appendChild(this.rows().render(t)))),this.clear(e),this.onFirstPage=1===this.currentPage,this.onLastPage=this.currentPage===this.lastPage}else this.setMessage(this.options.labels.noRows);let t,e=0,a=0,s=0;if(this.totalPages&&(e=this.currentPage-1,a=e*this.options.perPage,s=a+this.pages[e].length,a+=1,t=this.searching?this.searchData.length:this.data.length),this.label&&this.options.labels.info.length){const e=this.options.labels.info.replace("{start}",a).replace("{end}",s).replace("{page}",this.currentPage).replace("{pages}",this.totalPages).replace("{rows}",t);this.label.innerHTML=t?e:""}1==this.currentPage&&this.fixHeight()}renderPager(){if(h(this.pagers),this.totalPages>1){const t="pager",e=document.createDocumentFragment(),a=this.onFirstPage?1:this.currentPage-1,s=this.onLastPage?this.totalPages:this.currentPage+1;this.options.firstLast&&e.appendChild(o(t,1,this.options.firstText)),this.options.nextPrev&&e.appendChild(o(t,a,this.options.prevText));let i=this.links;this.options.truncatePager&&(i=((t,e,a,s,i)=>{let n;const r=2*(s=s||2);let h=e-s,o=e+s;const d=[],c=[];e<4-s+r?o=3+r:e>a-(3-s+r)&&(h=a-(2+r));for(let e=1;e<=a;e++)if(1==e||e==a||e>=h&&e<=o){const a=t[e-1];a.classList.remove("active"),d.push(a)}return d.forEach((e=>{const a=e.children[0].getAttribute("data-page");if(n){const e=n.children[0].getAttribute("data-page");if(a-e==2)c.push(t[e]);else if(a-e!=1){const t=l("li",{class:"ellipsis",html:`<a href="#">${i}</a>`});c.push(t)}}c.push(e),n=e})),c})(this.links,this.currentPage,this.pages.length,this.options.pagerDelta,this.options.ellipsisText)),this.links[this.currentPage-1].classList.add("active"),i.forEach((t=>{t.classList.remove("active"),e.appendChild(t)})),this.links[this.currentPage-1].classList.add("active"),this.options.nextPrev&&e.appendChild(o(t,s,this.options.nextText)),this.options.firstLast&&e.appendChild(o(t,this.totalPages,this.options.lastText)),this.pagers.forEach((t=>{t.appendChild(e.cloneNode(!0))}))}}renderHeader(){this.labels=[],this.headings&&this.headings.length&&this.headings.forEach(((t,e)=>{if(this.labels[e]=t.textContent,t.firstElementChild&&t.firstElementChild.classList.contains("dataTable-sorter")&&(t.innerHTML=t.firstElementChild.innerHTML),t.sortable="false"!==t.getAttribute("data-sortable"),t.originalCellIndex=e,this.options.sortable&&t.sortable){const e=l("a",{href:"#",class:"dataTable-sorter",html:t.innerHTML});t.innerHTML="",t.setAttribute("data-sortable",""),t.appendChild(e)}})),this.fixColumns()}bindEvents(){const t=this.options;if(t.perPageSelect){const e=this.wrapper.querySelector(".dataTable-selector");e&&e.addEventListener("change",(()=>{t.perPage=parseInt(e.value,10),this.update(),this.fixHeight(),this.emit("datatable.perpage",t.perPage)}),!1)}t.searchable&&(this.input=this.wrapper.querySelector(".dataTable-input"),this.input&&this.input.addEventListener("keyup",(()=>this.search(this.input.value)),!1)),this.wrapper.addEventListener("click",(e=>{const a=e.target;"a"===a.nodeName.toLowerCase()&&(a.hasAttribute("data-page")?(this.page(a.getAttribute("data-page")),e.preventDefault()):t.sortable&&a.classList.contains("dataTable-sorter")&&"false"!=a.parentNode.getAttribute("data-sortable")&&(this.columns().sort(this.headings.indexOf(a.parentNode)),e.preventDefault()))}),!1),window.addEventListener("resize",(()=>{this.rect=this.container.getBoundingClientRect(),this.fixColumns()}))}setColumns(t){t||this.data.forEach((t=>{Array.from(t.cells).forEach((t=>{t.data=t.innerHTML}))})),this.options.columns&&this.headings.length&&this.options.columns.forEach((t=>{Array.isArray(t.select)||(t.select=[t.select]),t.hasOwnProperty("render")&&"function"==typeof t.render&&(this.selectedColumns=this.selectedColumns.concat(t.select),this.columnRenderers.push({columns:t.select,renderer:t.render})),t.select.forEach((e=>{const a=this.headings[e];t.type&&a.setAttribute("data-type",t.type),t.format&&a.setAttribute("data-format",t.format),t.hasOwnProperty("sortable")&&a.setAttribute("data-sortable",t.sortable),t.hasOwnProperty("hidden")&&!1!==t.hidden&&this.columns().hide([e]),t.hasOwnProperty("sort")&&1===t.select.length&&this.columns().sort(t.select[0],t.sort,!0)}))})),this.hasRows&&(this.data.forEach(((t,e)=>{t.dataIndex=e,Array.from(t.cells).forEach((t=>{t.data=t.innerHTML}))})),this.selectedColumns.length&&this.data.forEach((t=>{Array.from(t.cells).forEach(((e,a)=>{this.selectedColumns.includes(a)&&this.columnRenderers.forEach((s=>{s.columns.includes(a)&&(e.innerHTML=s.renderer.call(this,e.data,e,t))}))}))})),this.columns().rebuild()),this.render("header")}destroy(){this.table.innerHTML=this.initialLayout,this.table.classList.remove("dataTable-table"),this.wrapper.parentNode.replaceChild(this.table,this.wrapper),this.initialized=!1}update(){this.wrapper.classList.remove("dataTable-empty"),this.paginate(this),this.render("page"),this.links=[];let t=this.pages.length;for(;t--;){const e=t+1;this.links[t]=o(0===t?"active":"",e,e)}this.sorting=!1,this.render("pager"),this.rows().update(),this.emit("datatable.update")}paginate(){const t=this.options.perPage;let e=this.activeRows;return this.searching&&(e=[],this.searchData.forEach((t=>e.push(this.activeRows[t])))),this.options.paging?this.pages=e.map(((a,s)=>s%t==0?e.slice(s,s+t):null)).filter((t=>t)):this.pages=[e],this.totalPages=this.lastPage=this.pages.length,this.totalPages}fixColumns(){if((this.options.scrollY.length||this.options.fixedColumns)&&this.activeHeadings&&this.activeHeadings.length){let t,e=!1;if(this.columnWidths=[],this.table.tHead){if(this.options.scrollY.length&&(e=l("thead"),e.appendChild(l("tr")),e.style.height="0px",this.headerTable&&(this.table.tHead=this.headerTable.tHead)),this.activeHeadings.forEach((t=>{t.style.width=""})),this.activeHeadings.forEach(((t,a)=>{const s=t.offsetWidth,i=s/this.rect.width*100;if(t.style.width=`${i}%`,this.columnWidths[a]=s,this.options.scrollY.length){const t=l("th");e.firstElementChild.appendChild(t),t.style.width=`${i}%`,t.style.paddingTop="0",t.style.paddingBottom="0",t.style.border="0"}})),this.options.scrollY.length){const t=this.table.parentElement;if(!this.headerTable){this.headerTable=l("table",{class:"dataTable-table"});const e=l("div",{class:"dataTable-headercontainer"});e.appendChild(this.headerTable),t.parentElement.insertBefore(e,t)}const a=this.table.tHead;this.table.replaceChild(e,a),this.headerTable.tHead=a,this.headerTable.parentElement.style.paddingRight=`${this.headerTable.clientWidth-this.table.clientWidth+parseInt(this.headerTable.parentElement.style.paddingRight||"0",10)}px`,t.scrollHeight>t.clientHeight&&(t.style.overflowY="scroll")}}else{t=[],e=l("thead");const a=l("tr");Array.from(this.table.tBodies[0].rows[0].cells).forEach((()=>{const e=l("th");a.appendChild(e),t.push(e)})),e.appendChild(a),this.table.insertBefore(e,this.body);const s=[];t.forEach(((t,e)=>{const a=t.offsetWidth,i=a/this.rect.width*100;s.push(i),this.columnWidths[e]=a})),this.data.forEach((t=>{Array.from(t.cells).forEach(((t,e)=>{this.columns(t.cellIndex).visible()&&(t.style.width=`${s[e]}%`)}))})),this.table.removeChild(e)}}}fixHeight(){this.options.fixedHeight&&(this.container.style.height=null,this.rect=this.container.getBoundingClientRect(),this.container.style.height=`${this.rect.height}px`)}search(t){return!!this.hasRows&&(t=t.toLowerCase(),this.currentPage=1,this.searching=!0,this.searchData=[],t.length?(this.clear(),this.data.forEach(((e,a)=>{const s=this.searchData.includes(e);t.split(" ").reduce(((t,a)=>{let s=!1,i=null,n=null;for(let t=0;t<e.cells.length;t++)if(i=e.cells[t],n=i.hasAttribute("data-content")?i.getAttribute("data-content"):i.textContent,n.toLowerCase().includes(a)&&this.columns(i.cellIndex).visible()){s=!0;break}return t&&s}),!0)&&!s?(e.searchIndex=a,this.searchData.push(a)):e.searchIndex=null})),this.wrapper.classList.add("search-results"),this.searchData.length?this.update():(this.wrapper.classList.remove("search-results"),this.setMessage(this.options.labels.noRows)),void this.emit("datatable.search",t,this.searchData)):(this.searching=!1,this.update(),this.emit("datatable.search",t,this.searchData),this.wrapper.classList.remove("search-results"),!1))}page(t){return t!=this.currentPage&&(isNaN(t)||(this.currentPage=parseInt(t,10)),!(t>this.pages.length||t<0)&&(this.render("page"),this.render("pager"),void this.emit("datatable.page",t)))}sortColumn(t,e){this.columns().sort(t,e)}insert(t){let e=[];if(r(t)){if(t.headings&&!this.hasHeadings&&!this.hasRows){const e=l("tr");t.headings.forEach((t=>{const a=l("th",{html:t});e.appendChild(a)})),this.head.appendChild(e),this.header=e,this.headings=[].slice.call(e.cells),this.hasHeadings=!0,this.options.sortable=this.initialSortable,this.render("header"),this.activeHeadings=this.headings.slice()}t.data&&Array.isArray(t.data)&&(e=t.data)}else Array.isArray(t)&&t.forEach((t=>{const a=[];Object.entries(t).forEach((([t,e])=>{const s=this.labels.indexOf(t);s>-1&&(a[s]=e)})),e.push(a)}));e.length&&(this.rows().add(e),this.hasRows=!0),this.update(),this.setColumns(),this.fixColumns()}refresh(){this.options.searchable&&(this.input.value="",this.searching=!1),this.currentPage=1,this.onFirstPage=!0,this.update(),this.emit("datatable.refresh")}clear(t){this.body&&h(this.body);let e=this.body;this.body||(e=this.table),t&&("string"==typeof t&&(document.createDocumentFragment().innerHTML=t),e.appendChild(t))}export(t){if(!this.hasHeadings&&!this.hasRows)return!1;const e=this.activeHeadings;let a=[];const s=[];let i,n,l,h;if(!r(t))return!1;const o={download:!0,skipColumn:[],lineDelimiter:"\n",columnDelimiter:",",tableName:"myTable",replacer:null,space:4,...t};if(o.type){if("txt"!==o.type&&"csv"!==o.type||(a[0]=this.header),o.selection)if(isNaN(o.selection)){if(Array.isArray(o.selection))for(i=0;i<o.selection.length;i++)a=a.concat(this.pages[o.selection[i]-1])}else a=a.concat(this.pages[o.selection-1]);else a=a.concat(this.activeRows);if(a.length){if("txt"===o.type||"csv"===o.type){for(l="",i=0;i<a.length;i++){for(n=0;n<a[i].cells.length;n++)if(!o.skipColumn.includes(e[n].originalCellIndex)&&this.columns(e[n].originalCellIndex).visible()){let t=a[i].cells[n].textContent;t=t.trim(),t=t.replace(/\s{2,}/g," "),t=t.replace(/\n/g,"  "),t=t.replace(/"/g,'""'),t=t.replace(/#/g,"%23"),t.includes(",")&&(t=`"${t}"`),l+=t+o.columnDelimiter}l=l.trim().substring(0,l.length-1),l+=o.lineDelimiter}l=l.trim().substring(0,l.length-1),o.download&&(l=`data:text/csv;charset=utf-8,${l}`)}else if("sql"===o.type){for(l=`INSERT INTO \`${o.tableName}\` (`,i=0;i<e.length;i++)!o.skipColumn.includes(e[i].originalCellIndex)&&this.columns(e[i].originalCellIndex).visible()&&(l+=`\`${e[i].textContent}\`,`);for(l=l.trim().substring(0,l.length-1),l+=") VALUES ",i=0;i<a.length;i++){for(l+="(",n=0;n<a[i].cells.length;n++)!o.skipColumn.includes(e[n].originalCellIndex)&&this.columns(e[n].originalCellIndex).visible()&&(l+=`"${a[i].cells[n].textContent}",`);l=l.trim().substring(0,l.length-1),l+="),"}l=l.trim().substring(0,l.length-1),l+=";",o.download&&(l=`data:application/sql;charset=utf-8,${l}`)}else if("json"===o.type){for(n=0;n<a.length;n++)for(s[n]=s[n]||{},i=0;i<e.length;i++)!o.skipColumn.includes(e[i].originalCellIndex)&&this.columns(e[i].originalCellIndex).visible()&&(s[n][e[i].textContent]=a[n].cells[i].textContent);l=JSON.stringify(s,o.replacer,o.space),o.download&&(l=`data:application/json;charset=utf-8,${l}`)}return o.download&&(o.filename=o.filename||"datatable_export",o.filename+=`.${o.type}`,l=encodeURI(l),h=document.createElement("a"),h.href=l,h.download=o.filename,document.body.appendChild(h),h.click(),document.body.removeChild(h)),l}}return!1}import(t){let e=!1;if(!r(t))return!1;const a={lineDelimiter:"\n",columnDelimiter:",",...t};if(a.data.length||r(a.data)){if("csv"===a.type){e={data:[]};const t=a.data.split(a.lineDelimiter);t.length&&(a.headings&&(e.headings=t[0].split(a.columnDelimiter),t.shift()),t.forEach(((t,s)=>{e.data[s]=[];const i=t.split(a.columnDelimiter);i.length&&i.forEach((t=>{e.data[s].push(t)}))})))}else if("json"===a.type){const t=(t=>{let e=!1;try{e=JSON.parse(t)}catch(t){return!1}return!(null===e||!Array.isArray(e)&&!r(e))&&e})(a.data);t&&(e={headings:[],data:[]},t.forEach(((t,a)=>{e.data[a]=[],Object.entries(t).forEach((([t,s])=>{e.headings.includes(t)||e.headings.push(t),e.data[a].push(s)}))})))}r(a.data)&&(e=a.data),e&&this.insert(e)}return!1}print(){const t=this.activeHeadings,e=this.activeRows,a=l("table"),s=l("thead"),i=l("tbody"),n=l("tr");t.forEach((t=>{n.appendChild(l("th",{html:t.textContent}))})),s.appendChild(n),e.forEach((t=>{const e=l("tr");Array.from(t.cells).forEach((t=>{e.appendChild(l("td",{html:t.textContent}))})),i.appendChild(e)})),a.appendChild(s),a.appendChild(i);const r=window.open();r.document.body.appendChild(a),r.print()}setMessage(t){let e=1;this.hasRows?e=this.data[0].cells.length:this.activeHeadings.length&&(e=this.activeHeadings.length),this.wrapper.classList.add("dataTable-empty"),this.label&&(this.label.innerHTML=""),this.totalPages=0,this.render("pager"),this.clear(l("tr",{html:`<td class="dataTables-empty" colspan="${e}">${t}</td>`}))}columns(t){return new p(this,t)}rows(t){return new c(this,t)}on(t,e){this.events=this.events||{},this.events[t]=this.events[t]||[],this.events[t].push(e)}off(t,e){this.events=this.events||{},t in this.events!=0&&this.events[t].splice(this.events[t].indexOf(e),1)}emit(t){if(this.events=this.events||{},t in this.events!=0)for(let e=0;e<this.events[t].length;e++)this.events[t][e].apply(this,Array.prototype.slice.call(arguments,1))}}function f(t){t.extend("backendTables",(function(t){return new class{constructor(e){this.tableInstance=e,this.baseUrl=t.baseUrl,this.sortable=this.tableInstance.options.sortable,this.filterable=t.filterable,this.filterElems=t.filterElems,this.searchable=this.tableInstance.options.searchable,this.searchInput=t.searchInput,this.clearSearchButton=t.clearSearchButton,this.dataTablePage=1,this.dataTablePageSize=this.tableInstance.options.perPage,this.filterable&&(this.dataTableFilter="all"),this.searchable&&(this.dataTableSearch="",this.defaultSearch=null==this.searchInput)}sortTable(){this.reinitDataTable(),this.tableInstance.page(this.dataTablePage)}changeTablePage(){this.reinitDataTable(),this.tableInstance.page(this.dataTablePage)}loadTableData(t,e,a,s,i,n){void 0===t&&(t=""),void 0===e&&(e=""),void 0===a&&(a=""),void 0===s&&(s=""),void 0===i&&(i=""),void 0===n&&(n="");let r=`${this.baseUrl}?offset=${(e-1)*a}&limit=${a}`;return this.searchable&&(r+=`&term=${encodeURIComponent(s)}`),this.sortable&&(r+=`&sort=${i}&direction=${n}`),this.filterable&&(r+=`&filter=${t}`),{url:r,load:function(t){let s=JSON.parse(t.responseText);const i=(e-1)*a,n=s.total_count-(s.data.length+i);return[...Array(i).keys()].forEach((t=>{s.data.unshift({foo:""})})),[...Array(n).keys()].forEach((t=>{s.data.push({foo:""})})),JSON.stringify(s.data)}}}initSortButtons(t=!1){this.tableInstance.table.querySelector("thead").querySelectorAll("th").forEach((e=>{if(null!=e.dataset.sortEnabled){const a=e.innerHTML,s=document.createElement("a");s.classList.add("dataTable-backendSorter"),s.href="#",null!=e.dataset.sortDefault&&t&&(["asc","desc"].includes(e.dataset.sortDefault)?this.dataTableDirection=e.dataset.sortDefault:this.dataTableDirection="asc",this.dataTableSort=e.dataset.sortName),e.innerHTML="",s.innerHTML=a,e.appendChild(s)}}))}reinitDataTable(){const t=document.activeElement===this.searchInput;this.tableInstance.destroy(),this.sortable&&this.initSortButtons(),this.tableInstance.init({ajax:this.loadTableData(this.dataTableFilter,this.dataTablePage,this.dataTablePageSize,this.dataTableSearch,this.dataTableSort,this.dataTableDirection)}),this.searchable&&this.defaultSearch&&(this.replaceVanillaSearch(),t&&this.searchInput.focus())}initFilters(){this.filterElems.forEach((t=>{t.addEventListener("click",(t=>{t.preventDefault();const e=t.target.closest("a").dataset.filter;this.dataTablePage=1,this.dataTableFilter=e,this.reinitDataTable()}))}))}replaceVanillaSearch(){const t=this.tableInstance.wrapper.querySelector(".dataTable-search input");null==this.searchInput&&(this.searchInput=t.cloneNode(!0)),t.parentNode.replaceChild(this.searchInput,t)}initSearchInput(){let t;this.defaultSearch&&this.replaceVanillaSearch();const e=()=>{this.searchInput.value.length>=3?(this.dataTableSearch=this.searchInput.value,this.dataTablePage=1,this.reinitDataTable()):this.searchInput.value.length||(this.dataTableSearch="",this.dataTablePage=1,this.reinitDataTable())};this.searchInput.addEventListener("keyup",(()=>{clearTimeout(t),t=setTimeout(e,500)})),this.searchInput.addEventListener("keydown",(()=>{clearTimeout(t)})),null!=this.clearSearchButton&&this.clearSearchButton.addEventListener("click",(t=>{t.preventDefault(),this.searchInput.value="",e()}))}passCustomStylesToElems(){const t=/^data\-element\-(.+)$/;this.tableInstance.container.querySelector("tbody").querySelectorAll("tr").forEach((e=>{this.tableInstance.headings.forEach(((a,s)=>{for(let i=0;i<a.attributes.length;i++){const n=a.attributes[i],r=n.nodeName.match(t);if(null!=r){const t=r[1];null!=t&&e.querySelectorAll("td")[s].setAttribute(t,n.nodeValue)}}}))}))}init(){this.filterable&&this.initFilters(),this.tableInstance.destroy(),this.sortable&&this.initSortButtons(!0),this.tableInstance.init({sortable:!1,searchable:!(!0!==this.searchable||!this.defaultSearch),fixedColumns:!1,ajax:this.loadTableData(this.dataTableFilter,this.dataTablePage,this.dataTablePageSize,this.dataTableSearch,this.dataTableSort,this.dataTableDirection)}),this.tableInstance.on("datatable.page",(t=>{parseInt(t)!==this.dataTablePage&&(this.dataTablePage=parseInt(t),this.changeTablePage())})),this.tableInstance.on("datatable.perpage",(t=>{const e=parseInt(t);this.dataTablePage=Math.floor((this.dataTablePage-1)*this.dataTablePageSize/e)+1,this.dataTablePageSize=e,this.changeTablePage()})),this.tableInstance.on("datatable.init",(()=>{this.sortable&&(this.tableInstance.headings.forEach((t=>{t.dataset.sortName===this.dataTableSort&&t.classList.add(this.dataTableDirection)})),this.tableInstance.header.querySelectorAll(".dataTable-backendSorter").forEach((t=>{t.addEventListener("click",(t=>{t.preventDefault();const e=t.target.closest("th");let a;a=e.classList.contains("asc")?"desc":"asc",this.dataTableSort=e.dataset.sortName,this.dataTableDirection=a,this.sortTable()}))})))})),this.tableInstance.on("datatable.update",(()=>{this.tableInstance.data.length>0&&this.passCustomStylesToElems()})),this.searchable&&this.initSearchInput()}}(this)}))}return f(g),n})()}));